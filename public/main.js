(()=>{var e,t={481:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});const o=r.p+"img/cross.png"},760:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});const o=r.p+"img/cross.svg"},686:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});const o=r.p+"img/down_arrow.svg"},797:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});const o=r.p+"img/icons_sprite.png"},148:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});const o=r.p+"img/noavatar.png"},398:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});const o=r.p+"img/plus.svg"},120:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});const o=r.p+"img/up_arrow.svg"},397:(e,t,r)=>{var o={"./cross.png":481,"./cross.svg":760,"./down_arrow.svg":686,"./icons_sprite.png":797,"./noavatar.png":148,"./plus.svg":398,"./up_arrow.svg":120};function n(e){var t=s(e);return r(t)}function s(e){if(!r.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}n.keys=function(){return Object.keys(o)},n.resolve=s,e.exports=n,n.id=397},434:(e,t,r)=>{"use strict";r.p,r.p;let o,n=document.querySelector("body"),s=n.querySelector(".board"),a=n.querySelector(".clear-board"),l=n.querySelector(".add-card"),d=s.querySelector("#card-template").content.querySelector(".board-card"),i=s.querySelector("#task-template").content.querySelector(".board-card__item"),c=1,u=n.querySelector(".card-contents"),f=u.querySelector(".card-contents__text"),p=u.querySelector(".card-contents__submit-button"),y=u.querySelector(".card-contents__header-1"),g=u.querySelector(".card-contents__card-header"),v=[],m={width:"100%",height:"100%",position:"absolute",top:0,left:0,backgroundColor:"rgba(255, 255, 255, 0.7)",zIndex:50};class h{constructor(e){this.id=e.id,this.header=e.querySelector(".board-card__header").textContent,this.date=e.querySelector(".board-card__date").textContent,this.tasks=[],this.taskIds=[],this.markers=[],this.left="",this.top=""}}class S{constructor(){this.cardsFontSize="14px"}}new S;let _=new class extends S{constructor(){super()}};class b extends Error{constructor(e){super(e),this.name="NoTextError"}}function k(e){let t=e.querySelector(".board-card__list"),r=i.cloneNode(!0),o=r.querySelector(".board-card__task");r.taskId=e.tasksIdsCounter++,o.textContent=f.value,q(r,e),x(e,r),L(e,r),function(e,t){let r=t.querySelector(".board-card__circle").style.fill,o=t.querySelector(".board-card__task"),n=v.find((t=>t.id==e.id));n.tasks.push(o.textContent),n.markers.push(r),n.taskIds.push(t.taskId),localStorage.savedCards=JSON.stringify(v)}(e,r),t.appendChild(r),f.value=""}function w(e){e.querySelector(".board-card__add-task-button").addEventListener("click",(function(){D("new task",e)}))}function q(e,t){e.querySelector(".board-card__task-remover").addEventListener("click",(function(){let r=v.find((e=>e.id==t.id)),o=r.taskIds.indexOf(e.taskId);if(r.tasks.splice(o,1),r.markers.splice(o,1),r.taskIds.splice(o,1),localStorage.savedCards=JSON.stringify(v),e.remove(),!t.querySelector(".board-card__item")){for(let e of v)e.id==t.id&&(v.splice(v.indexOf(e),1),localStorage.savedCards=JSON.stringify(v));t.style.transform="scale(0)",setTimeout((()=>t.remove()),300)}}))}function x(e,t){let r=["limegreen","orange","red"],o=t.querySelector(".board-card__circle"),n=v.find((t=>t.id==e.id));o.addEventListener("click",(function(){2===r.indexOf(`${o.style.fill}`)?o.style.fill=r[0]:o.style.fill=r[r.indexOf(o.style.fill)+1];let e=n.taskIds.indexOf(t.taskId);n.markers[e]=o.style.fill,localStorage.savedCards=JSON.stringify(v)}))}function L(e,t){t.addEventListener("dblclick",(function(){let r=t.querySelector(".board-card__task"),o=document.createElement("textarea");var n;o.classList.add("board-card__task-editor"),o.value=r.textContent,o.rows=3,t.style.marginBottom="40px",function(e,t,r){let o=t.querySelector(".board-card__task"),n=v.find((t=>t.id==e.id));r.addEventListener("keydown",(function(e){13===e.keyCode&&(e.preventDefault(),o.textContent=r.value,n.tasks[n.taskIds.indexOf(t.taskId)]=r.value,t.style.marginBottom=0,r.remove(),localStorage.savedCards=JSON.stringify(v))}))}(e,t,o),(n=o).addEventListener("focusout",(()=>n.focus())),t.appendChild(o),o.focus()}))}function C(e){e.addEventListener("mousedown",(t=>{if(!t.target.classList.contains("board-card__task-editor")){t.preventDefault();let r=t.clientX-e.offsetLeft,o=t.clientY-e.offsetTop;function n(t,n){e.style.left=t-r+"px",e.style.top=n-o+"px"}function s(e){n(e.clientX,e.clientY)}e.style.zIndex=100,n(t.clientX,t.clientY),document.addEventListener("mousemove",s),document.addEventListener("mouseup",(()=>{O(e),E(e,e.style.left,e.style.top),document.removeEventListener("mousemove",s),e.style.zIndex=0}))}}))}function E(e,t,r){let o=v.find((t=>t.id==e.id));o.left=t,o.top=r,localStorage.savedCards=JSON.stringify(v)}function O(e){let t=window.innerWidth,r=window.innerHeight,o=e.offsetWidth,n=e.offsetHeight;parseInt(e.style.left)<0&&(e.style.left="10px"),parseInt(e.style.top)<0&&(e.style.top="10px"),parseInt(e.style.left)+o>t&&(e.style.left=t-o-10+"px"),parseInt(e.style.top)+n>r-74&&(e.style.top=r-n-74+"px")}window.addEventListener("resize",(()=>{let e=document.querySelectorAll(".board-card");if(0!==e.length)for(let t of e)O(t)})),window.addEventListener("load",(()=>{let e=document.querySelectorAll(".board-card");if(0!==e.length)for(let t of e)O(t)})),setInterval((()=>{let e=s.querySelector(".board__clock"),t=new Date,r=t.getHours(),o=t.getMinutes(),n=t.getSeconds();r<10&&(r=`0${r}`),o<10&&(o=`0${o}`),n<10&&(n=`0${n}`),e.innerHTML=`${r}:${o}:${n}`}),1e3),a.addEventListener("click",(function(){let e=s.querySelectorAll(".board-card");for(let t of e)t.style.transform="scale(0)",setTimeout((()=>t.remove()),300);localStorage.savedCards="",v=[],c=1})),l.addEventListener("click",(function(e){e.preventDefault(),D("new card")}));let I=s.querySelector(".settings-menu"),T=I.querySelector(".settings-menu__button"),N=T.querySelector(".settings-menu__button-image"),z=I.querySelector(".settings-menu__font-size-setting");if(T.addEventListener("click",(function(e){e.preventDefault(),"translateY(-100%)"===I.style.transform?(I.style.transform="translateY(0)",N.style.transform="rotate(180deg)"):(I.style.transform="translateY(-100%)",N.style.transform="rotate(0)")})),z.addEventListener("input",(function(){let e=s.querySelectorAll(".board-card");for(let t of e)t.style.fontSize=z.value+"px";_.cardsFontSize=z.value+"px",localStorage.userSettings=JSON.stringify(_)})),localStorage.userSettings&&(_=JSON.parse(localStorage.userSettings),z.value=parseInt(_.cardsFontSize)),0!==localStorage.savedCards.length){let e=JSON.parse(localStorage.savedCards);for(let t of e)$(t)}function $(e){let t=d.cloneNode(!0),r=t.querySelector(".board-card__header"),o=t.querySelector(".board-card__list"),n=t.querySelector(".board-card__date");v.push(e),t.style.fontSize=_.cardsFontSize,t.id=e.id,c=+e.id+1,r.textContent=e.header,n.textContent=e.date,w(t),e.tasks.forEach(((r,n)=>{let s=i.cloneNode(!0),a=s.querySelector(".board-card__task"),l=s.querySelector(".board-card__circle"),d=r;s.taskId=e.taskIds[n],l.style.fill=e.markers[n],a.textContent=d,q(s,t),x(t,s),L(t,s),o.appendChild(s)})),s.appendChild(t),C(t),t.style.left=e.left,t.style.top=e.top}function D(e,t){function r(n){n.preventDefault();try{if("new card"===e&&0==g.value)throw new b("Заполните все поля!");if(0==f.value)throw new b("Заполните все поля!")}catch(e){return void alert(e.message)}switch(e){case"new card":y.classList.add("hidden"),g.classList.add("hidden"),u.classList.add("hidden"),o.remove(),function(e){let t=d.cloneNode(!0),r=t.querySelector(".board-card__date"),o=t.querySelector(".board-card__header");""!==_.cardsFontSize&&(t.style.fontSize=_.cardsFontSize),t.tasksIdsCounter=1,o.textContent=g.value,g.value="",r.textContent=`Дата: ${function(){let e=new Date,t=e.getDate(),r=e.getMonth()+1;return r<10&&(r=`0${r}`),t<10&&(t=`0${t}`),`${t}.${r}.${e.getFullYear()}`}()}`,t.id=c,c<1e3?c++:c=1,v.push(new h(t)),w(t),k(t),s.appendChild(t),C(t),t.style.left="40%",t.style.top="-300px",setTimeout((()=>{return(e=t).style.transition="all 500ms cubic-bezier(0.500, 0.250, 0.195, 1.650)",e.style.top="300px",void setTimeout((()=>{e.style.transition="transform 0.3s",E(e,e.style.left,e.style.top)}),1e3);var e}),100)}();break;case"new task":u.classList.add("hidden"),o.remove(),k(t)}p.removeEventListener("click",r)}u.classList.remove("hidden"),"new card"===e?(y.classList.remove("hidden"),g.classList.remove("hidden"),g.focus()):f.focus(),function(e){o=document.createElement("div");for(let e in m)o.style[e]=m[e];o.addEventListener("click",(function(){p.removeEventListener("click",r),y.classList.add("hidden"),g.classList.add("hidden"),e.classList.add("hidden"),f.value="",o.remove()})),n.appendChild(o)}(u),p.addEventListener("click",r)}r(952);var J=r(671),F=r(189);const j=document.querySelector(".page-header__login-form"),Y=j.querySelector(".login-button"),M=document.querySelector(".page-header__user"),A=M.querySelector(".page-header__name"),B=(0,J.ZF)({apiKey:"AIzaSyCBehvUdJ1Sww5gcdv4yBRRpetngqVoFiY",authDomain:"board-3a7c6.firebaseapp.com",projectId:"board-3a7c6",storageBucket:"board-3a7c6.appspot.com",messagingSenderId:"457479426554",appId:"1:457479426554:web:f1b1ea86d33b6ff9f95443",measurementId:"G-5SZC6Y976H"}),H=(0,F.ad)(B);let P;Y.addEventListener("click",(async function(e){e.preventDefault();const t=j.querySelector(".user-name"),r=j.querySelector(".user-password"),o=function(e,t){for(let r of e)if(r.name===t)return r;return new Error("Wrong user name")}(await async function(e){const t=(0,F.hJ)(e,"users");return await(0,F.PL)(t).then((e=>e.docs.map((e=>e.data()))))}(H),t.value);o instanceof Error?alert("No such user"):!function(e,t){return e.password===t}(o,r.value)?alert("Wrong password"):(P=(0,F.JU)(H,"users",t.value),async function(e){try{await(0,F.r7)(e,{login:!0})}catch(e){console.error("Error:",e)}}(P),M.style.display="inline-block",A.innerHTML=t.value,j.style.display="none")})),r(397)},952:()=>{let e=document.querySelector(".settings-menu__theme-toggler"),t=document.querySelector(".settings-menu__toggler"),r=document.querySelector("#main_style");"dark"===localStorage.currentTheme&&(t.style.left="18px",setTimeout((()=>e.style.background="linear-gradient(to right, rgb(41, 223, 71) 70%, white 70%)"),30),r.href="./dark.css"),t.addEventListener("click",(function(){"-2px"===t.style.left?(t.style.left="18px",setTimeout((()=>e.style.background="linear-gradient(to right, rgb(41, 223, 71) 70%, white 70%)"),30),r.href="./dark.css",localStorage.currentTheme="dark"):(t.style.left="-2px",r.href="./light.css",setTimeout((()=>e.style.background="linear-gradient(to right, rgb(41, 223, 71) 30%, white 30%)"),30),localStorage.currentTheme="light")}))}},r={};function o(e){var n=r[e];if(void 0!==n)return n.exports;var s=r[e]={exports:{}};return t[e](s,s.exports,o),s.exports}o.m=t,e=[],o.O=(t,r,n,s)=>{if(!r){var a=1/0;for(c=0;c<e.length;c++){for(var[r,n,s]=e[c],l=!0,d=0;d<r.length;d++)(!1&s||a>=s)&&Object.keys(o.O).every((e=>o.O[e](r[d])))?r.splice(d--,1):(l=!1,s<a&&(a=s));if(l){e.splice(c--,1);var i=n();void 0!==i&&(t=i)}}return t}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[r,n,s]},o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;o.g.importScripts&&(e=o.g.location+"");var t=o.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");r.length&&(e=r[r.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=e})(),(()=>{var e={179:0};o.O.j=t=>0===e[t];var t=(t,r)=>{var n,s,[a,l,d]=r,i=0;if(a.some((t=>0!==e[t]))){for(n in l)o.o(l,n)&&(o.m[n]=l[n]);if(d)var c=d(o)}for(t&&t(r);i<a.length;i++)s=a[i],o.o(e,s)&&e[s]&&e[s][0](),e[a[i]]=0;return o.O(c)},r=self.webpackChunk=self.webpackChunk||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var n=o.O(void 0,[150],(()=>o(434)));n=o.O(n)})();