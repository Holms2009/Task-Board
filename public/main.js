(()=>{var e,t={481:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});const s=r.p+"img/cross.png"},760:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});const s=r.p+"img/cross.svg"},686:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});const s=r.p+"img/down_arrow.svg"},797:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});const s=r.p+"img/icons_sprite.png"},148:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});const s=r.p+"img/noavatar.png"},398:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});const s=r.p+"img/plus.svg"},120:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});const s=r.p+"img/up_arrow.svg"},397:(e,t,r)=>{var s={"./cross.png":481,"./cross.svg":760,"./down_arrow.svg":686,"./icons_sprite.png":797,"./noavatar.png":148,"./plus.svg":398,"./up_arrow.svg":120};function n(e){var t=a(e);return r(t)}function a(e){if(!r.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}n.keys=function(){return Object.keys(s)},n.resolve=a,e.exports=n,n.id=397},434:(e,t,r)=>{"use strict";r.p,r.p;var s=r(189),n=r(671);const a=document.querySelector(".page-header__login-form"),o=a.querySelector(".login-button"),i=document.querySelector(".page-header__user"),d=i.querySelector(".page-header__name"),l=(0,n.ZF)({apiKey:"AIzaSyCBehvUdJ1Sww5gcdv4yBRRpetngqVoFiY",authDomain:"board-3a7c6.firebaseapp.com",projectId:"board-3a7c6",storageBucket:"board-3a7c6.appspot.com",messagingSenderId:"457479426554",appId:"1:457479426554:web:f1b1ea86d33b6ff9f95443",measurementId:"G-5SZC6Y976H"}),c=(0,s.ad)(l);let u;async function f(e){const t=(0,s.hJ)(e,"users");return await(0,s.PL)(t).then((e=>e.docs.map((e=>e.data()))))}function y(e,t){for(let r of e)if(r.name===t)return r;return new Error("Wrong user name")}function p(e){i.style.display="inline-block",d.innerHTML=e,a.style.display="none",u=(0,s.JU)(c,"users",e)}void 0===sessionStorage.loginState&&(sessionStorage.loginState=!1),"true"===sessionStorage.loginState&&p(sessionStorage.user),o.addEventListener("click",(async function(){const e=a.querySelector(".user-name"),t=a.querySelector(".user-password"),r=y(await f(c),e.value);r instanceof Error?alert("No such user"):!function(e,t){return e.password===t}(r,t.value)?alert("Wrong password"):(sessionStorage.loginState=!0,sessionStorage.user=e.value,p(e.value))}));let g,v=document.querySelector("body"),S=v.querySelector(".board"),m=v.querySelector(".clear-board"),h=v.querySelector(".add-card"),_=S.querySelector("#card-template").content.querySelector(".board-card"),b=S.querySelector("#task-template").content.querySelector(".board-card__item"),k=1,w=v.querySelector(".card-contents"),q=w.querySelector(".card-contents__text"),x=w.querySelector(".card-contents__submit-button"),C=w.querySelector(".card-contents__header-1"),L=w.querySelector(".card-contents__card-header"),O=[],E={width:"100%",height:"100%",position:"absolute",top:0,left:0,backgroundColor:"rgba(255, 255, 255, 0.7)",zIndex:50};class I{constructor(e){this.id=e.id,this.header=e.querySelector(".board-card__header").textContent,this.date=e.querySelector(".board-card__date").textContent,this.tasks=[],this.taskIds=[],this.markers=[],this.left="",this.top=""}}class N{constructor(){this.cardsFontSize="14px"}}new N;let J=new class extends N{constructor(){super()}};class T extends Error{constructor(e){super(e),this.name="NoTextError"}}function z(e){let t=e.querySelector(".board-card__list"),r=b.cloneNode(!0),n=r.querySelector(".board-card__task");r.taskId=e.tasksIdsCounter++,n.textContent=q.value,D(r,e),F(e,r),j(e,r),async function(e,t){let r=t.querySelector(".board-card__circle").style.fill,n=t.querySelector(".board-card__task"),a=O.find((t=>t.id==e.id));a.tasks.push(n.textContent),a.markers.push(r),a.taskIds.push(t.taskId),localStorage.savedCards=JSON.stringify(O),await(0,s.r7)(u,{savedCards:JSON.stringify(O)})}(e,r),t.appendChild(r),q.value=""}function $(e){e.querySelector(".board-card__add-task-button").addEventListener("click",(function(){X("new task",e)}))}async function D(e,t){e.querySelector(".board-card__task-remover").addEventListener("click",(async function(){let r=O.find((e=>e.id==t.id)),n=r.taskIds.indexOf(e.taskId);if(r.tasks.splice(n,1),r.markers.splice(n,1),r.taskIds.splice(n,1),localStorage.savedCards=JSON.stringify(O),await(0,s.r7)(u,{savedCards:JSON.stringify(O)}),e.remove(),!t.querySelector(".board-card__item")){for(let e of O)e.id==t.id&&(O.splice(O.indexOf(e),1),localStorage.savedCards=JSON.stringify(O),await(0,s.r7)(u,{savedCards:JSON.stringify(O)}));t.style.transform="scale(0)",setTimeout((()=>t.remove()),300)}}))}async function F(e,t){let r=["limegreen","orange","red"],n=t.querySelector(".board-card__circle"),a=O.find((t=>t.id==e.id));n.addEventListener("click",(async function(){2===r.indexOf(`${n.style.fill}`)?n.style.fill=r[0]:n.style.fill=r[r.indexOf(n.style.fill)+1];let e=a.taskIds.indexOf(t.taskId);a.markers[e]=n.style.fill,localStorage.savedCards=JSON.stringify(O),await(0,s.r7)(u,{savedCards:JSON.stringify(O)})}))}function j(e,t){t.addEventListener("dblclick",(function(){let r=t.querySelector(".board-card__task"),n=document.createElement("textarea");var a;n.classList.add("board-card__task-editor"),n.value=r.textContent,n.rows=3,t.style.marginBottom="40px",async function(e,t,r){let n=t.querySelector(".board-card__task"),a=O.find((t=>t.id==e.id));r.addEventListener("keydown",(async function(e){13===e.keyCode&&(e.preventDefault(),n.textContent=r.value,a.tasks[a.taskIds.indexOf(t.taskId)]=r.value,t.style.marginBottom=0,r.remove(),localStorage.savedCards=JSON.stringify(O),await(0,s.r7)(u,{savedCards:JSON.stringify(O)}))}))}(e,t,n),(a=n).addEventListener("focusout",(()=>a.focus())),t.appendChild(n),n.focus()}))}function Y(e){e.addEventListener("mousedown",(t=>{if(!t.target.classList.contains("board-card__task-editor")){t.preventDefault();let r=t.clientX-e.offsetLeft,s=t.clientY-e.offsetTop;function n(t,n){e.style.left=t-r+"px",e.style.top=n-s+"px"}function a(e){n(e.clientX,e.clientY)}function o(){A(e),M(e,e.style.left,e.style.top),document.removeEventListener("mousemove",a),e.style.zIndex=0,document.removeEventListener("mousemove",o)}e.style.zIndex=100,n(t.clientX,t.clientY),document.addEventListener("mousemove",a),document.addEventListener("mouseup",o)}}))}async function M(e,t,r){let n=O.find((t=>t.id==e.id));n.left=t,n.top=r,localStorage.savedCards=JSON.stringify(O),await(0,s.r7)(u,{savedCards:JSON.stringify(O)})}function A(e){let t=window.innerWidth,r=window.innerHeight,s=e.offsetWidth,n=e.offsetHeight;parseInt(e.style.left)<0&&(e.style.left="10px"),parseInt(e.style.top)<0&&(e.style.top="10px"),parseInt(e.style.left)+s>t&&(e.style.left=t-s-10+"px"),parseInt(e.style.top)+n>r-74&&(e.style.top=r-n-74+"px")}window.addEventListener("resize",(()=>{let e=document.querySelectorAll(".board-card");if(0!==e.length)for(let t of e)A(t)})),window.addEventListener("load",(()=>{let e=document.querySelectorAll(".board-card");if(0!==e.length)for(let t of e)A(t)})),setInterval((()=>{let e=S.querySelector(".board__clock"),t=new Date,r=t.getHours(),s=t.getMinutes(),n=t.getSeconds();r<10&&(r=`0${r}`),s<10&&(s=`0${s}`),n<10&&(n=`0${n}`),e.innerHTML=`${r}:${s}:${n}`}),1e3),m.addEventListener("click",(async function(){let e=S.querySelectorAll(".board-card");for(let t of e)t.style.transform="scale(0)",setTimeout((()=>t.remove()),300);localStorage.savedCards="",O=[],await(0,s.r7)(u,{savedCards:JSON.stringify(O)}),k=1})),h.addEventListener("click",(function(e){e.preventDefault(),X("new card")}));let B=S.querySelector(".settings-menu"),H=B.querySelector(".settings-menu__button"),P=H.querySelector(".settings-menu__button-image"),U=B.querySelector(".settings-menu__font-size-setting");if(H.addEventListener("click",(function(e){e.preventDefault(),"translateY(-100%)"===B.style.transform?(B.style.transform="translateY(0)",P.style.transform="rotate(180deg)"):(B.style.transform="translateY(-100%)",P.style.transform="rotate(0)")})),U.addEventListener("input",(async function(){let e=S.querySelectorAll(".board-card");for(let t of e)t.style.fontSize=U.value+"px";J.cardsFontSize=U.value+"px",localStorage.userSettings=JSON.stringify(J),await(0,s.r7)(u,{savedCards:JSON.stringify(O)})})),localStorage.userSettings&&(J=JSON.parse(localStorage.userSettings),U.value=parseInt(J.cardsFontSize)),sessionStorage.loginState){let e;(async function(){return y(await f(c),sessionStorage.user).savedCards})().then((function(t){e=JSON.parse(t);for(let t of e)W(t)}))}function W(e){let t=_.cloneNode(!0),r=t.querySelector(".board-card__header"),s=t.querySelector(".board-card__list"),n=t.querySelector(".board-card__date");O.push(e),t.style.fontSize=J.cardsFontSize,t.id=e.id,k=+e.id+1,r.textContent=e.header,n.textContent=e.date,$(t),e.tasks.forEach(((r,n)=>{let a=b.cloneNode(!0),o=a.querySelector(".board-card__task"),i=a.querySelector(".board-card__circle"),d=r;a.taskId=e.taskIds[n],i.style.fill=e.markers[n],o.textContent=d,D(a,t),F(t,a),j(t,a),s.appendChild(a)})),S.appendChild(t),Y(t),t.style.left=e.left,t.style.top=e.top}function X(e,t){function r(s){s.preventDefault();try{if("new card"===e&&0==L.value)throw new T("Заполните все поля!");if(0==q.value)throw new T("Заполните все поля!")}catch(e){return void alert(e.message)}switch(e){case"new card":C.classList.add("hidden"),L.classList.add("hidden"),w.classList.add("hidden"),g.remove(),function(e){let t=_.cloneNode(!0),r=t.querySelector(".board-card__date"),s=t.querySelector(".board-card__header");""!==J.cardsFontSize&&(t.style.fontSize=J.cardsFontSize),t.tasksIdsCounter=1,s.textContent=L.value,L.value="",r.textContent=`Дата: ${function(){let e=new Date,t=e.getDate(),r=e.getMonth()+1;return r<10&&(r=`0${r}`),t<10&&(t=`0${t}`),`${t}.${r}.${e.getFullYear()}`}()}`,t.id=k,k<1e3?k++:k=1,O.push(new I(t)),$(t),z(t),S.appendChild(t),Y(t),t.style.left="40%",t.style.top="-300px",setTimeout((()=>{return(e=t).style.transition="all 500ms cubic-bezier(0.500, 0.250, 0.195, 1.650)",e.style.top="300px",void setTimeout((()=>{e.style.transition="transform 0.3s",M(e,e.style.left,e.style.top)}),1e3);var e}),100)}();break;case"new task":w.classList.add("hidden"),g.remove(),z(t)}x.removeEventListener("click",r)}w.classList.remove("hidden"),"new card"===e?(C.classList.remove("hidden"),L.classList.remove("hidden"),L.focus()):q.focus(),function(e){g=document.createElement("div");for(let e in E)g.style[e]=E[e];g.addEventListener("click",(function(){x.removeEventListener("click",r),C.classList.add("hidden"),L.classList.add("hidden"),e.classList.add("hidden"),q.value="",g.remove()})),v.appendChild(g)}(w),x.addEventListener("click",r)}r(952),r(397)},952:()=>{let e=document.querySelector(".settings-menu__theme-toggler"),t=document.querySelector(".settings-menu__toggler"),r=document.querySelector("#main_style");"dark"===localStorage.currentTheme&&(t.style.left="18px",setTimeout((()=>e.style.background="linear-gradient(to right, rgb(41, 223, 71) 70%, white 70%)"),30),r.href="./dark.css"),t.addEventListener("click",(function(){"-2px"===t.style.left?(t.style.left="18px",setTimeout((()=>e.style.background="linear-gradient(to right, rgb(41, 223, 71) 70%, white 70%)"),30),r.href="./dark.css",localStorage.currentTheme="dark"):(t.style.left="-2px",r.href="./light.css",setTimeout((()=>e.style.background="linear-gradient(to right, rgb(41, 223, 71) 30%, white 30%)"),30),localStorage.currentTheme="light")}))}},r={};function s(e){var n=r[e];if(void 0!==n)return n.exports;var a=r[e]={exports:{}};return t[e](a,a.exports,s),a.exports}s.m=t,e=[],s.O=(t,r,n,a)=>{if(!r){var o=1/0;for(c=0;c<e.length;c++){for(var[r,n,a]=e[c],i=!0,d=0;d<r.length;d++)(!1&a||o>=a)&&Object.keys(s.O).every((e=>s.O[e](r[d])))?r.splice(d--,1):(i=!1,a<o&&(o=a));if(i){e.splice(c--,1);var l=n();void 0!==l&&(t=l)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[r,n,a]},s.d=(e,t)=>{for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;s.g.importScripts&&(e=s.g.location+"");var t=s.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");r.length&&(e=r[r.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=e})(),(()=>{var e={179:0};s.O.j=t=>0===e[t];var t=(t,r)=>{var n,a,[o,i,d]=r,l=0;if(o.some((t=>0!==e[t]))){for(n in i)s.o(i,n)&&(s.m[n]=i[n]);if(d)var c=d(s)}for(t&&t(r);l<o.length;l++)a=o[l],s.o(e,a)&&e[a]&&e[a][0](),e[o[l]]=0;return s.O(c)},r=self.webpackChunk=self.webpackChunk||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var n=s.O(void 0,[150],(()=>s(434)));n=s.O(n)})();